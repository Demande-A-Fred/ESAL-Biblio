<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
   <style>
       textarea {
  width : 98vw;
  height : 20vh;
/*
  tab-size :8vw;
  */
}

#textarea2 {
  background-color : lightgrey;
}

</style>
    <script>function replaceText() {
  // Récupération des éléments textarea et input
  var textarea1 = document.getElementById("textarea1");
  var textarea2 = document.getElementById("textarea2");
  var replaceChars = document.getElementById("replaceChars").value;
  var replaced = "\t";
  
  // Récupération du contenu de textarea1
  var content = textarea1.value;
  var content2 = "";
  // Convertir la chaîne en tableau pour remplacer chaque caractère
  var charsArray = Array.from(replaceChars);
  
  // Remplacement des caractères choisis
  var i = false;
  var j = 0;
  var pos=-1;

  while (i === false) {
    var char = new RegExp(charsArray[j]);
    if (charsArray[j]==='N') {
      char = /\n/;
    }
    pos = content.search(char);
    if (pos===-1) {
      content2+=content.substring(0);
      console.log("rien trouvé // ");
      i=true;
    }
    else {
      content2+=content.substring(0,pos)+replaced;
      console.log("remplace :"+content.substring(0,pos+1)+" par "+content.substring(0,pos)+replaced + " // p="+pos);
      content = content.substring(pos+1);
      j++;
      if (j===charsArray.length) {
        j=0;
      }
    
    } //else
   //  textarea2.value = content2;
  }//while
  // Placement du nouveau contenu dans textarea2
  textarea2.value = content2;
}

function copyPaste() {
  // Get the text field
  var copyText = document.getElementById("textarea2");

  // Select the text field
  copyText.select();
  copyText.setSelectionRange(0, 99999); // For mobile devices

   // Copy the text inside the text field
  navigator.clipboard.writeText(copyText.value);

  
}

 
    </script>
</head>
<body>
    <textarea id="textarea1">
nom prenom, titre; année
mémoire, etudiant
nom2 prenom2, titre2; année2
mémoire2, etudiant2
nom3 prenom3, titre3; année3
mémoire3, etudiant3
</textarea>
<br>
<label for="replaceChars">Caractères à remplacer :</label>
<input type="text" id="replaceChars" title="Entrer les signes qui séparent les champs. La lettre N pour indiquer le retour à la ligne comme séparateur" onchange="replaceText()"
       >
<button onclick="replaceText()">Remplacer les caractères</button>
<button onclick="copyPaste()">Copier le résultat dans le clipboard</button>
<br>
<textarea id="textarea2" onclick="copyPaste()" title="Cliquer le texte pour le copier"></textarea>


<!-- 
nom prenom, titre, année, mémoire, etudiant
nom2 prenom2, titre2, année2, mémoire2, etudiant2
nom3 prenom3, titre3, année3, mémoire3, etudiant3

nom prenom, titre; année- mémoire, etudiant
nom2 prenom2, titre2; année2- mémoire2, etudiant2
nom3 prenom3, titre3; année3- mémoire3, etudiant3

nom prenom, titre; année
mémoire, etudiant
nom2 prenom2, titre2; année2
mémoire2, etudiant2
nom3 prenom3, titre3; année3
mémoire3, etudiant3

-->
</body>
</html>
